(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4245:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(2495)}])},2495:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return j}});var a=i(3342),n=i(9200),s=i.n(n),l=i(9685),d=i(9644),c=i.n(d),r=i(9628),o=i(9405),f=i(5698),x=i(6228);let p=e=>{let{role:t,text:i}=e,n="you"===t;return(0,a.jsx)(x.Message,{icon:n?"send":"receive",color:n?"primary":"secondary",reverse:n,title:n?"你":"AI",description:i})},u=e=>{let{children:t}=e;return(0,a.jsx)("div",{children:t})};p.Group=u;let b=()=>{let[e,t]=(0,l.useState)(""),[i,n]=(0,l.useState)(""),[d,x]=(0,l.useState)([]),u=async e=>{let i=e.target.files[0],a=new FormData;a.append("file",i);try{let e=await c().post("/upload_file",a);1e3===e.data.code&&t(e.data.data.file_uuid)}catch(e){}},b=async()=>{if(e)try{let t=await c().post("/ask",{question:i,file_uuid:e});1e3===t.data.code&&(x(e=>[...e,{role:"you",text:i},{role:"ai",text:t.data.data.answer}]),n(""))}catch(e){}};return(0,a.jsxs)("div",{className:"jsx-f2def8297c23f5e container",children:[(0,a.jsxs)("div",{className:"jsx-f2def8297c23f5e out",children:[(0,a.jsx)("div",{className:"jsx-f2def8297c23f5e title",children:(0,a.jsx)(r.Z,{h2:!0,children:"与PDF文件聊天"})}),(0,a.jsx)("div",{className:"jsx-f2def8297c23f5e"}),(0,a.jsx)(o.ZP,{clearable:!0,underlined:!0,labelPlaceholder:"输入文件UUID以启用聊天",value:e,width:"30%",onChange:e=>t(e.target.value)}),(0,a.jsxs)("div",{className:"jsx-f2def8297c23f5e btn-line",children:[(0,a.jsx)("div",{className:"jsx-f2def8297c23f5e clear-btn",children:(0,a.jsx)(f.ZP,{auto:!0,ghost:!0,shadow:!0,bordered:!0,type:"gradient",onClick:()=>t(""),children:"清空 ID"})}),(0,a.jsxs)("div",{className:"jsx-f2def8297c23f5e file-input-wrapper",children:[(0,a.jsx)(f.ZP,{auto:!0,shadow:!0,color:"gradient",onClick:()=>document.getElementById("file-input").click(),children:"上传文件"}),(0,a.jsx)("input",{id:"file-input",type:"file",accept:".pdf",onChange:u,style:{display:"none"},className:"jsx-f2def8297c23f5e"})]})]}),(0,a.jsx)("div",{className:"jsx-f2def8297c23f5e chat-container",children:(0,a.jsx)(p.Group,{children:d.map((e,t)=>(0,a.jsx)(p,{...e},t))})}),(0,a.jsxs)("div",{className:"jsx-f2def8297c23f5e question-input-wrapper",children:[(0,a.jsx)(o.ZP,{value:i,width:"80%",onChange:e=>n(e.target.value),clearable:!0,underlined:!0,labelPlaceholder:"输入问题",onKeyPress:e=>{"Enter"===e.key&&b()}}),(0,a.jsx)(f.ZP,{auto:!0,shadow:!0,color:"gradient",onClick:b,children:"提问"})]})]}),(0,a.jsx)(s(),{id:"f2def8297c23f5e",children:".container.jsx-f2def8297c23f5e{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.title.jsx-f2def8297c23f5e{margin:50px 0}.out.jsx-f2def8297c23f5e{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:75%}.file-input-wrapper.jsx-f2def8297c23f5e{width:20%}.btn-line.jsx-f2def8297c23f5e{margin:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;width:50%;padding:10px}.clear-btn.jsx-f2def8297c23f5e{width:20%}.chat-container.jsx-f2def8297c23f5e{margin-top:20px;max-height:400px;overflow-y:auto;padding:10px;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}.question-input-wrapper.jsx-f2def8297c23f5e{margin:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;width:50%;padding:10px}"})]})};var j=b}},function(e){e.O(0,[85,774,888,179],function(){return e(e.s=4245)}),_N_E=e.O()}]);